title: "[GRUB4DOS] 网络启动时可以使用的小技巧一则"
id: 452
date: 2010-06-21 17:32:01
tags: 
- TFTP
- GRUB4DOS
categories: 
- GRUB4DOS/技巧
---


　　由于最近在测试GRUB4DOS的网络启动,因为要测试不同TFTP服务器的情况.所以需要来回切换两个TFTP服务器.刚开始时还是使用比较保守的方法，即修改DHCP服务器的配置，指定TFTP服务器地址，然后重启PXE客户端．


　　每次修改服务器的配置很麻烦，而且也影响了其它机器的启动，后来突然想到，GRUB4DOS　PXE启动时的服务器IP地址在内存中保存的位置是已知的．是不是可以直接修改这个IP地址来实现切换TFTP服务器的功能呢，经过测试是成功的，分享一下，也许在某些情况下你也用得上．^_^


具体效果看图片．．．．

![]([CDN_URL]:/upload/2010/06/BD825164772A2EE4EDE97353B2A955423D61BC96.png)

启动时使用的是192.168.0.253服务器．

通过修改内存地址`0x8288`位置的值来改来服务器IP地址．

其中`0x3200a8c0`就是`192.168.0.50`转换过来的．

`0x3200a8c0`在内存中显示的是

`C0 A8 00 32`对应的十进制`192 168 0 50`

怎么样，应该看懂了吧．如果看不懂也没有关系．可以使用目前`GRUB4DOS`的内置命令calc来计算

	calc 50<<8+0<<8+168<<8+192

然后用write命令修改，也可以直接修改

	calc *0x8288 = 50<<8+0<<8+168<<8+192

只要把IP地址反序代替上面的相对应的数字就可以了．

注：这里的计算器是简单计算，从左到右依次计算的．

通过显示服务器上的一个文件可以看到已经成功改变了．

