<!DOCTYPE HTML>
<html><head>
<meta http-equiv="Cache-Control" content="max-age=7200" />

<!--addons at start of head-->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>第 5 页 | chenall&#39;s Blog</title>
<meta name="author" content="chenall">

<meta name="description" content="chenall 的搏客,技术,分享,开源.">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="chenall&#39;s Blog"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="chenall&#39;s Blog Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">var site = {BASE_URI: '/'};var _js2load = [];</script>

<!--addons at end of head-->
</head>
<body>
  <!--addons at start of body-->
    <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TVFS32"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TVFS32');</script>
  <!-- End Google Tag Manager -->
    <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">chenall's Blog</a>
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
  
        <li><a href="/about/" title="关于">关于</a></li>      
        <li><a href="/archives/" title="归档">归档</a></li>      
        <li><a href="/qzgb-fm/" title="泉州广播">泉州广播</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>在线电视<b class='caret'></b></a>
        <ul class='dropdown-menu'>
    
          <li><a href="/tv/" title="在线直播">在线直播</a></li>    
          <li><a href="http://tv1.chenall.tk" title="直播线路1">直播线路1</a></li>    
          <li><a href="http://tv2.chenall.tk" title="直播线路2">直播线路2</a></li>    
        </ul>
      </li>
    
        <li><a href="/guestbook/" title="留言板">留言板</a></li>      
        <li><a href="/tags/GRUB4DOS/" title="GRUB4DOS">GRUB4DOS</a></li>      
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/chenall">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/chenall">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div></header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1>chenall's Blog <small>走自己的路,让别人说去吧</small></h1></div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/grub4dos_biosint/">可以在GRUB4DOS下调用BIOS中断的外部命令</a></h1>
      
        <span>发表于<time datetime="2011-10-17T15:36:28.000Z"> <a href="/post/grub4dos_biosint/">2011-10-17</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>本程序可以在GRUB4DOS中直接调用BIOS中断和读写指定端口，从而获取一些功能和需要的数据。</p>
<p>可以方便开发人员临时调试某个功能时使用。</p>
<p>当然你对中断资料比较熟悉的话，就可以利用GRUB4DOS配合本程序作出非常酷的效果（比如移动的文字）</p>
<p>使用方法，直接下载程序在GRUB4DOS中执行</p>
<h2 id="参数">参数</h2>
<ul>
<li>写数据到指定端口<br>  bios outb/outw/outl PORT VALUE</li>
<li>从指定端口读数据<br>  bios inb/inw/inl </li>
<li>中断调用<br>  bios int=INT eax=EAX ebx=EBX […]</li>
</ul>
<p>可使用的所以参数在下面的列表中</p>
<pre><code>unsigned long edi; // as input and output
unsigned long esi; // as input and output
unsigned long ebp; // as input and output
unsigned long esp; // stack pointer, as input
unsigned long ebx; // as input and output
unsigned long edx; // as input and output
unsigned long ecx; // as input and output
unsigned long eax;// as input and output
unsigned long gs; // as input and output
unsigned long fs; // as input and output
unsigned long es; // as input and output
unsigned long ds; // as input and output
unsigned long ss; // stack segment, as input
unsigned long eip; // instruction pointer, as input, 
unsigned long cs; // code segment, as input
unsigned long eflags; // as input and output
</code></pre><p>效果图在这里(之前的图片放在盛大的服务器上,已经失效)</p>
<ol>
<li><p>直接读写端口演示，分别使用<code>outl</code>和<code>inl</code>  </p>
<p>说明：chkpci就是主要使用<code>outl</code>和<code>inl</code>获取PCI信息的（具体的在本站文章上面的搜索中输入CHKPCI查看更多介绍）<br>结果自己看，后面使用bios调用得到的是第一条PCI的记录。。</p>
<p><img src="http://c-dl.qiniudn.com/post/grub4dos_biosint_01.png" alt="获取pci信息"></p>
</li>
<li><p>调用BIOS中断演示</p>
<p><img src="http://c-dl.qiniudn.com/post/grub4dos_biosint_02.png" alt="未执行前的界面"></p>
<pre><code> 这是调用了`INT 10`后的界面，这里稍微介绍一下这个语句的作用
 调用`BIOS`的`int10`中断第6号功能。`AX=0X0601` 即AH=06H,AL=01
 CX=0x050d 即CH=5,CL=0xD(13)
 DX=0X0E20 CH=0xe(14),cl=0x20(32)
 意思就是把屏幕从第5行第13个字符开始到第14行第32个字符结尾的柜形上移一行。
 功能号：06H和07H
 功能：初始化屏幕或滚屏
 入口参数：AH＝06H—向上滚屏，07H—向下滚屏
          AL＝滚动行数(0—清窗口)
          BH＝空白区域的缺省属性
         (CH、CL)＝窗口的左上角位置(Y坐标，X坐标)
         (DH、DL)＝窗口的右下角位置(Y坐标，X坐标)
 出口参数： 无
</code></pre><p><img src="http://c-dl.qiniudn.com/post/grub4dos_biosint_03.png" alt="调用结果"></p>
</li>
</ol>
<p>这个程序只是为了方便测试而编写,使用者需自己注意。</p>
<p>下载地址（带源码）：</p>
<p><a href="http://code.google.com/p/grubutils/downloads/list" target="_blank">http://code.google.com/p/grubutils/downloads/list</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li><li><a href="/categories/GRUB4DOS/扩展/">扩展</a></li></span></span> | <span class="tags">标签 <a href="/tags/chkpci/" class="label label-primary">chkpci</a><a href="/tags/GRUB4DOS/" class="label label-success">GRUB4DOS</a><a href="/tags/原创/" class="label label-info">原创</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/grub4dos_biosint/#comments" class="ds-thread-count comment-link" data-thread-key="785" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/grub4dos_date_bat/">[分享] 直接在GRUB4DOS环境中修改系统时间</a></h1>
      
        <span>发表于<time datetime="2011-10-08T09:12:07.000Z"> <a href="/post/grub4dos_date_bat/">2011-10-08</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>修改系统日期有很多种方法，比如直接进入BIOS修改，或者进入系统后修改。</p>
<p>如果我想每次开机都改成一个固定的时间，进入系统后自动更新为正确的时间（一般用于过期软件破解）</p>
<p>现在可以直接使用GRUB4DOS来实现自动修改了。</p>
<p>本批处理属于GRUB4DOS高级编程，直接调用BIOS中断来实现修改日期的目的。</p>
<p>BIOS中断调用的实现例子。</p>
<p>用法:</p>
<p>把批处理直接保存为DATE然后使用以下命令就可以了或直接使用C语言编译的版本</p>
<p>  显示当前日期</p>
<pre><code>date
</code></pre><p>  修改日期</p>
<pre><code>date 2011-01-01
</code></pre><h3 id="相关资料:">相关资料:</h3>
<pre><code>时钟服务(Clock Service——INT 1AH) 
00H —读取时钟“滴答”计数06H —设置闹钟
01H —设置时钟“滴答”计数07H —闹钟复位
02H —读取时间0AH —读取天数计数
03H —设置时间0BH —设置天数计数
04H —读取日期 80H —设置声音源信息 
05H —设置日期
(1)、功能00H
功能描述：读取时钟“滴答”计数
入口参数：AH=00H
出口参数：AL=00H——未过午夜，否则，表示已过午夜
CX:DX=时钟“滴答”计数
(2)、功能01H
功能描述：设置时钟“滴答”计数
入口参数：AH=01H
CX:DX=时钟“滴答”计数
出口参数：无
(3)、功能02H
功能描述：读取时间
入口参数：AH=02H
出口参数：CH=BCD码格式的小时
CL=BCD码格式的分钟
DH=BCD码格式的秒
DL=00H——标准时间，否则，夏令时
CF=0——时钟在走，否则，时钟停止
(4)、功能03H
功能描述：设置时间
入口参数：AH=03H
CH=BCD码格式的小时
CL=BCD码格式的分钟
DH=BCD码格式的秒
DL=00H——标准时间，否则，夏令时
出口参数：无
(5)、功能04H
功能描述：读取日期
入口参数：AH=04H
出口参数：CH=BCD码格式的世纪
CL=BCD码格式的年
DH=BCD码格式的月
DL=BCD码格式的日
CF=0——时钟在走，否则，时钟停止
(6)、功能05H
功能描述：设置日期
入口参数：AH=05H
CH=BCD码格式的世纪
CL=BCD码格式的年
DH=BCD码格式的月
DL=BCD码格式的日
出口参数：无
(7)、功能06H
功能描述：设置闹钟
入口参数：AH=06H
CH=BCD码格式的小时
CL=BCD码格式的分钟
DH=BCD码格式的秒
出口参数：CF=０——操作成功，否则，闹钟已设置或时钟已停止
(8)、功能07H
功能描述：闹钟复位
入口参数：AH=07H
出口参数：无
(9)、功能0AH
功能描述：读取天数计数，仅在PS/2有效，在此从略
(10)、功能0BH
功能描述：设置天数计数，仅在PS/2有效，在此从略
(11)、功能80H
功能描述：设置声音源信息
入口参数：AH=80H
AL=声音源
=00H——8253可编程计时器，通道2
=01H——盒式磁带输入
=02H——I/O通道上的&quot;Audio In&quot;
=03H——声音产生芯片
出口参数：无
</code></pre><p>C语言版的代码在这里</p>
<p><a href="http://code.google.com/p/grubutils/source/browse/trunk/src/date.c" target="_blank">http://code.google.com/p/grubutils/source/browse/trunk/src/date.c</a></p>
<p>批处理版源码:</p>
<pre><code>!BAT
::datefunc for grub4dos by chenall 2011-10-08
setlocal
debug off
set edi=0x60000
set esi=0x60004
set ebp=0x60008
set esp=0x6000C
set ebx=0x60010
set bx=0x60010
set edx=0x60014
set dx=0x60014
set ecx=0x60018
set cx=0x60018
set eax=0x6001C
set ax=0x6001C
set gs=0x60020
set fs=0x60024
set es=0x60028
set ds=0x6002c
set ss=0x60030
set eip=0x60034
set cs=0x60038
set eflags=0x60003c
::时钟服务(Clock Service——INT 1AH) 
::04H —读取日期
call :BIOS_INT 1A ax=0x400
set date=%*
if exist date &amp;&amp; goto :SET_DATE
call Fn.0 0 &quot;%%04X%%04X&quot; *%cx% *%dx% | set date=
echo -n The current date is: %date:~0,4%-%date:~4,2%-%date:~6%
set /p date=Enter the new date: (yyyy-mm-dd)

:SET_DATE  调用BIOS中断修改日期
::05H —设置日期
call :BIOS_INT 1A ax=0x500 cx=0x%date:~0,4% dx=0x%date:~5,2%%%date:~8,2%
exit

:BIOS_INT
::初始化系统参数
echo -n &gt; (md)0x300+1
write %cs% -1
write %ss% -1
write %esp% -1
write %eflags% -1
write %ds% -1
write %es% -1
write %fs% -1
write %gs% -1
write %eip% 0xFFFF%1CD
shift 1

::设置参数
:参数
if &quot;%2&quot;==&quot;&quot; goto :realmode_run
write %%%1% %2
shift 1
shift 1
goto :参数
:realmode_run
call Fn.53 0x60000
exit
</code></pre>
      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li><li><a href="/categories/GRUB4DOS/批处理/">批处理</a></li></span></span> | <span class="tags">标签 <a href="/tags/date/" class="label label-primary">date</a><a href="/tags/GRUB4DOS/" class="label label-success">GRUB4DOS</a><a href="/tags/time/" class="label label-info">time</a><a href="/tags/批处理/" class="label label-warning">批处理</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/grub4dos_date_bat/#comments" class="ds-thread-count comment-link" data-thread-key="782" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/g4d_filelist/">[原创] GRUB4DOS 通用模块之文件选择模块[2011-10-01 更新]</a></h1>
      
        <span>发表于<time datetime="2011-08-22T05:16:17.000Z"> <a href="/post/g4d_filelist/">2011-08-22</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>本模块是一个GRUB4DOS的批处理</p>
<p>可用于搜索N级目录下的指定类型文件,并显示于菜单上</p>
<p>这是一个通用模块,可以通过参数直接调用或者通过预先设置变量的方法再调用,</p>
<p>使用方法请参考本站另一贴子</p>
<p><a href="/post/grub4dos_hdpart/">[原创] GRUB4DOS 通用模块之分区选择</a></p>
<h3 id="2011-08-22_(最终版）">2011-08-22 (最终版）</h3>
<ol>
<li>优化了检测代码．</li>
<li>filpre支持子目录的检测．</li>
</ol>
<h3 id="2011-08-21_(变化比较大，请注意看更新说明，新的版本使用起来更加灵活．）">2011-08-21 (变化比较大，请注意看更新说明，新的版本使用起来更加灵活．）</h3>
<ol>
<li>菜单标题自动居中显示</li>
<li><p>cmd的语法改变</p>
<p>旧的版本<code>cmd=echo</code>要改成<code>cmd=&quot;echo %1&quot;</code></p>
<p>在批处理中调用需要使用<code>%%1</code><br>即，需要多一个<code>%1</code>的参数，这个参数用于接收文件参数．可以放在cmd参数的任意位置．<br>并且支持类拟<code>%~dpnx1</code>的格式．</p>
</li>
<li><p>新增<code>filpre</code>参数,指定文件名前辍.</p>
<p><del>注意:使用该参数时,<code>subdir</code>参数将不起作用,为了不影响其它情况下的检测速度,该参数只支持单级目录.</del></p>
</li>
</ol>
<h3 id="2011-08-16_更新:(新的版本处理的速度会慢一些,但精确度比较高,之前的版本会把带扩展名的目录当成文件显示在菜单上)">2011-08-16 更新:(新的版本处理的速度会慢一些,但精确度比较高,之前的版本会把带扩展名的目录当成文件显示在菜单上)</h3>
<ol>
<li><p>添加了一个参数root,指定要从哪个目录开始找.例子:</p>
<p>root=()/boot</p>
<p>从只找/BOOT目录下的文件,注:前面的()是必须的,你也可以指定一个磁盘,代表从这个磁盘的这个目录开始查找比如</p>
<p>root=(hd0,4)/boot</p>
<p>则先从(hd0,4)/boot目录下查找文件,</p>
<p>注:如果有带devs参数,必须确保上面的(hd0,4)磁盘有在在devs列表中.</p>
</li>
<li><p>支持查找无扩展名的文件(之前的版本无扩展名的全部被当成一个子目录对待)</p>
</li>
<li>新的ext参数只查找无扩展名的文件.<code>ext=.</code>会查找无扩展名的文件.</li>
<li>菜单的注释新增了文件大小的提示(因为新的版本使用cat —locate=0来检测是否一个文件,就顺便把这个也利用上了.)</li>
</ol>
<p>本模块支持的参数如下</p>
<ul>
<li><code>m.cmd</code>    指定每个菜单要执行的命令 ( 必须的其它的都是可选参数.)</li>
<li><code>m.title</code>     指定菜单标题</li>
<li><code>m.return</code>    指定返回命令</li>
<li><code>m.menu</code>    指定菜单位置(默认使用(md)0x210+16来存放菜单)</li>
<li><code>m.subdir</code>    指定要查找的目录级数,默认1</li>
<li><code>m.devs</code>    指定要查找的设备(find的参数)</li>
<li><code>m.init</code>     指定菜单的初始化命令</li>
<li><code>m.ext</code>    指定扩展名(用于过滤),多个扩展名用双引号每个扩展名之间用空格分隔<pre><code> 例: ext=&quot;.gho .txt&quot;
</code></pre></li>
<li><code>m.root</code>    指定根目录.(第一个被检查的目录)比如(hd0,4)/boot/或(hd0,5)<pre><code> 注：该参数和m.devs参数配合使用时，将会只查找以上路径下的文件．例子:
 指定m.root=(hd0,4)/boot 或/boot
 只会查找符合条件的磁盘/BOOT目录下的文件．
</code></pre></li>
<li><code>m.dirext</code>       是否检测带扩展名的目录,设为任意值即启用,默认禁用,<pre><code>  除非有必要,否则不建议使用,启动这个参数会使得检测的速度变得很慢.
</code></pre></li>
<li><code>m.filpre</code>　  指定文件名前辍,过滤非以filpre参数开头的文件.(测试)</li>
</ul>
<p>以下是使用的效果截图,欢迎反馈BUG或建议.(图片原链接已失效,以后再抽空重新弄)</p>
<ol>
<li><h3 id="当前分区,根目录">当前分区,根目录</h3>
</li>
<li><h3 id="当前分区,3级目录">当前分区,3级目录</h3>
</li>
<li><h3 id="当前分区,二级目录,">当前分区,二级目录,</h3>
</li>
<li><h3 id="二级目录,所有硬盘分区">二级目录,所有硬盘分区</h3>
</li>
<li><h3 id="2011-08-16更新的版本效果图-">2011-08-16更新的版本效果图.</h3>
</li>
</ol>
<pre><code class="bat">!BAT
setlocal
debug off
checkrange 20110918:-1 read 0x8278 || echo Please use grub4dos-0.4.5b-2011-09-18 or above! &amp;&amp; exit 1
if &quot;%1&quot;==&quot;&quot; goto :参数检测
set *
:获取参数
if /i &quot;%1&quot;==&quot;&quot; &amp;&amp; goto :参数检测
set m.%~1=%~2
shift 1
shift 1
goto :获取参数

:help
echo Usage: %0 cmd=&quot;cmd for each file&quot; OPTIONS..
echo OPTIONS:
echo -e \t title=&quot;the main menu title&quot;
echo -e \t menu=&quot;pre_set menu file&quot;
echo -e \t subdir=n
echo -e \t devs=&quot;find parameters&quot;
echo -e \t return=&quot;return cmd&quot;
echo -e \t init=&quot;init cmd&quot;
echo -e \t filpre=filepre
echo -e \t ext=fileext
echo -e \t root=&quot;root dir. e.g. ()/boot/&quot;
echo -e \n\t for more please visit http://chenall.net
exit

:菜单居中
set title=屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯
set title=%title:~0,%1%%
exit

:参数检测
if not exist m.cmd &amp;&amp; goto :help
if not exist m.title &amp;&amp; set m.title=Please select a file
if not exist m.menu &amp;&amp; set m.menu=(md)0x210+16 &amp;&amp; echo -e default 1\ndebug off &gt; (md)0x210+16
if not exist m.subdir &amp;&amp; set m.subdir=1
if not exist m.devs &amp;&amp; set m.devs=--set-root
if not exist m.root &amp;&amp; set m.root=()
echo -e !BAT\necho %m.cmd% \&gt;\&gt; %m.menu% &gt; (md)0x260+4
::获取标题字符数量用于标题居中
set title=%m.title%
set /a title=68-*0x4CB00&gt;&gt;1
call :菜单居中 %title%
::自动生成菜单
set ?_n=1
set m.info=File list menu for grub4dos by chenall.\n\t\t for more information please visit http://chenall.net
if exist m.init &amp;&amp; echo %m.init% &gt;&gt; %m.menu%
echo title %title% %m.title% %title%\n\n\t%m.info% &gt;&gt; %m.menu%
echo pause %m.info% &gt;&gt; %m.menu%
echo -e $[0106] %m.info%
echo $[0102] Please wait ...
echo $[1105] Working......
root %m.root%
if exist m.debug echo %@time%
find %m.devs% call :生成文件列表 || echo Unknow Error.
if exist m.debug pause %@time%
echo title 屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯 http://chenall.net 屯 2011-08-22 屯\n\n\t%m.info% &gt;&gt; %m.menu%
echo pause %m.info% &gt;&gt; %m.menu%
set ?_n=
if not exist m.return &amp;&amp; configfile %m.menu%
echo title   0. Return &gt;&gt;  %m.menu%
echo %m.return%  &gt;&gt; %m.menu%
echo boot &gt;&gt; %m.menu%
configfile %m.menu%
exit

:文件过滤
if &quot;%~1&quot;==&quot;&quot; exit
set tmp=%1
shift
if &quot;%tmp:~-2,1%&quot;==&quot;~&quot; &amp;&amp; goto :文件过滤
if &quot;%tmp:~0,1%&quot;==&quot;$&quot; &amp;&amp; goto :文件过滤
call :检测文件 %0
goto :文件过滤

:获取文件大小
calc *0x8290&gt;&gt;30 &amp;&amp; set size=30GB &amp;&amp; exit
calc *0x8290&gt;&gt;20 &amp;&amp; set size=20MB &amp;&amp; exit
calc *0x8290&gt;&gt;10 &amp;&amp; set size=10KB &amp;&amp; exit
set size=00B
exit

:检测文件
if exist m.debug1 &amp;&amp; echo %~f1
::检测前辍
call Fn.10 &quot;%m.filpre%&quot; &quot;%~n1&quot;
if &quot;%@retval%&quot;==&quot;1&quot; &amp;&amp; goto :检测目录
::检测后辍
if exist m.ext || goto :添加菜单
set f.type=%~x1
if not exist f.type set f.type=.
call :过滤 %m.ext% &amp;&amp; goto :添加菜单

:检测目录
if %m.subdir%==0 &amp;&amp; exit
if exist m.dirext || if &quot;%~x1&quot;==&quot;&quot; || exit
cat --length=0 /%1 &amp;&amp; exit
if exist m.debug2 &amp;&amp; echo $[0101] %~f1
goto :生成文件列表

:过滤
if &quot;%1&quot;==&quot;&quot; &amp;&amp; exit 1
shift
if /i &quot;%0&quot;==&quot;%f.type%&quot; || goto :过滤
exit

:添加菜单
cat --length=0 /%1 || goto :检测目录
call :获取文件大小
if exist m.debug3 &amp;&amp; echo $[0102] %~f1
calc *0x8290=*0x8290&gt;&gt;%size:~0,2%
set size=%@retval% %size:~2%
set m=1    %?_n%
echo title %m:~-3%. %~f1\n\n\t~%size% %~f1  &gt;&gt; %m.menu%
(md)0x260+4 %~f1
echo boot &gt;&gt; %m.menu%
set /a ?_n=%?_n%+1
exit

:生成文件列表
setlocal
if &quot;%~1&quot;==&quot;&quot; || root %~f1
set /a m.subdir=%m.subdir%-1
ls | call :文件过滤= || echo
endlocal
exit
</code></pre>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li><li><a href="/categories/GRUB4DOS/批处理/">批处理</a></li></span></span> | <span class="tags">标签 <a href="/tags/GRUB4DOS/" class="label label-primary">GRUB4DOS</a><a href="/tags/批处理/" class="label label-success">批处理</a><a href="/tags/文件列表/" class="label label-info">文件列表</a><a href="/tags/模块/" class="label label-warning">模块</a><a href="/tags/原创/" class="label label-primary">原创</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/g4d_filelist/#comments" class="ds-thread-count comment-link" data-thread-key="754" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/grub4dos_replace/">[GRUB4DOS] 通用模块之字符串替换</a></h1>
      
        <span>发表于<time datetime="2011-08-17T05:12:30.000Z"> <a href="/post/grub4dos_replace/">2011-08-17</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>本程序使用GRUB4DOS批处理编写.</p>
<p>实现了以下功能.</p>
<ol>
<li>替换某个变量中指定的字符串.</li>
<li>删除某个变量中指定的字符串.</li>
</ol>
<p>使用方法:</p>
<p>把脚本另存为REPLACE</p>
<p>然后直接调用</p>
<p>replace 变量名 字符串1 字符串2 [起始位置]</p>
<p>变量名是GRUB4DOS的一个变量,必须已经存在.因为替换的是这个变量的内容.</p>
<p>字符串1 查找指定字符串</p>
<p>字符串2 找到之后要替换的字符串.</p>
<pre><code>    起始位置是可选的,可以选择从指定字符开始进行替换.起始位置之前的字符不会被改变.默认是0.
</code></pre><p>如果需要的话可以直接集成到你的批处理中.只要把:replace标签(包含)之后的代码复制过去然后使用</p>
<p>call :replace 来调用就行了.</p>
<p>复制代码请点这里:</p>
<pre><code>!BAT
setlocal
debug off
if exist %1 goto :replace
echo $[0101] Replace module for grub4dos by chenall 2011-08-17
echo $[0101] replace the string $[0103]find $[0101]with string $[0103]replacewith$[0101] in VARIABLE name VAR
echo $[0102] usage:
echo $[0106]     replace VAR find replacewith [start]
echo $[0106]             VAR           a valid VARIABLE name(must defined).
echo $[0106]             find          the string that will be replaced.
echo $[0106]             replacewith   The replacement substring
echo $[0106]             start         Specifies the start. Default is 0.
echo
echo $[0104]  for more please visit $[0105]http://chenall.net/post/grub4dos_replace/
exit

:replace
if not exist %1 exit
echo %%%1%% &gt; (md)0x266+2
set skip=%2
set skip_l=%@retval%
set /a skip=%4
if %skip%==0 || cat (md)0x266+1,%skip% &gt;&gt; (md)0x267+1
:replace_loop
cat --locate=%2 --number=1 --skip=%skip% (md)0x266+1 | set n=
if not exist n goto :replace_ok
if %n%==0 || cat --skip=%skip% (md)0x266+1,%?% &gt;&gt; (md)0x267+1
set /a skip=0x%n%+%skip_l%
echo -n %~3 &gt;&gt; (md)0x267+1
goto :replace_loop
:replace_ok
cat --skip=%skip% (md)0x266+1 &gt;&gt; (md)0x267+1
cat (md)0x267+1 | set %1=
endlocal &amp;&amp; set %1=%%%1%%
</code></pre>
      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li><li><a href="/categories/GRUB4DOS/编程/">编程</a></li></span></span> | <span class="tags">标签 <a href="/tags/GRUB4DOS/" class="label label-primary">GRUB4DOS</a><a href="/tags/批处理/" class="label label-success">批处理</a><a href="/tags/原创/" class="label label-info">原创</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/grub4dos_replace/#comments" class="ds-thread-count comment-link" data-thread-key="767" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/grub4dos_hdpart/">[GRUB4DOS] 通用模块之分区选择</a></h1>
      
        <span>发表于<time datetime="2011-08-09T08:07:36.000Z"> <a href="/post/grub4dos_hdpart/">2011-08-09</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>通用Grub4dos硬盘分区选择接口模块,</p>
<p>供有需要的朋友使用.</p>
<p>可以在你的菜单中简单的加入一个分区选择模块.</p>
<p>要求:  必须使用2011-08-09以后发布的GRUB4DOS</p>
<p>使用方法:</p>
<p>首先复制代码另存为hd_part.lst<br>然后在你的批处理或菜单中直接调用.调用的方法有两种.</p>
<p>1.简单调用,直接在执行模块的时候加参数例子:<br><img src="http://photo.staticsdo.com/a1/486/458/0/60809-49499083-8.png" alt=""><br>效果图.根据你硬盘的分区情况列出菜单.</p>
<p><img src="http://photo.staticsdo.com/a1/422/278/391/60810-49499083-8.png" alt=""></p>
<p>2.如果你需要多次调用,建议使用此方法(先设置好需要的变量后再执行模块)<br>如实现上面的例子:</p>
<pre><code>set m.cmd=&quot;pause test cmd&quot;
set m.return=&quot;pause test return&quot;
hd_part.lst
</code></pre><p>注:使用方法1时,将不会使用变量参数即1,2不能混用.</p>
<pre><code class="bat">!BAT
::::通用Grub4dos硬盘分区选择接口模块.
::1.程序占用内存地址(md)0x20A+22
::2.首先设置好参数,然后直接执行本批处理调用.
::3.参数设置.(变量)m.cmd必须设置,其它的可选
::  m.cmd    选择指定分区时要执行的命令接口执行是附加参数分区号例 set m.cmd=echo时,执行(hd0,0)的菜单就相当于执行echo (hd0,0).
::  m.title  菜单主标题
::  m.return 返回菜单时要执行的命令(如果没有设置,则不会出现返回菜单)
::  m.init   菜单初始化脚本(自动生成的菜单title命令之前的内容)
::4.使用方法.两种方式,自己根据情况选择.
::    1.直接通过批处理传递以上参数(用批处理传递参数时不要加前面的m.)例:
::      hd_part.lst cmd=&quot;echo&quot; return=&quot;configfile (md)4+8&quot;
::    2.先设置变量再调用
::      set m.cmd=echo
::      set m.return=&quot;configfile (md)4+8&quot;
::      hd_part.lst
::
::    chenall 编写于 2011-08-09. http://chenall.net 
setlocal
debug off
checkrange 20110809:-1 read 0x8278 || echo Please use grub4dos-0.4.5b-2011-08-09 or above! &amp;&amp; exit 1
if &quot;%1&quot;==&quot;&quot; goto :参数检测
set *
::set m.cmd=
::set m.title=
::set m.init=
::set m.return=
:获取参数
if /i &quot;%1&quot;==&quot;&quot; &amp;&amp; goto :参数检测
set m.%~1=%~2
shift 1
shift 1
goto :获取参数

:参数检测
if not exist m.cmd exit 1
if not exist m.title set m.title=屯屯屯屯屯屯屯屯 Please select a partition 屯屯屯屯屯屯屯屯
set m.menu=(md)0x210+16
::自动生成菜单
echo default 1 &gt; %m.menu%
echo -e debug off\n%m.init% &gt;&gt; %m.menu%
echo title %m.title% &gt;&gt; %m.menu%
echo pause Partition list menu for grub4dos by chenall . http://chenall.net &gt;&gt; %m.menu%
set n=1
set skip=0
find --devices=h root &gt; (md)0x20A+6
call :分区信息
echo -e clear\ntitle 屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯屯\npause Partition list menu for grub4dos by chenall . http://chenall.net  &gt;&gt; %m.menu%
if not exist m.return &amp;&amp; configfile %m.menu%
echo title  0. Return &gt;&gt;  %m.menu%
echo %m.return%  &gt;&gt;  %m.menu%
echo boot &gt;&gt; %m.menu%
configfile %m.menu%
exit

:分区信息
cat --locate=\xa --number=1 --skip=%skip% (md)0x20A+6 || exit
set /a length=%?%-%skip%
cat --skip=%skip% --length=%length% (md)0x20A+6 | call :add_list=
set /a skip=%length%+%skip%+1
goto :分区信息
:add_list
set m=1   %n%
echo title %m:~-2%. %* &gt;&gt; %m.menu%
echo %m.cmd% %1 &gt;&gt; %m.menu%
echo boot &gt;&gt; %m.menu%
set /a n=%n%+1
exit
</code></pre>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li><li><a href="/categories/GRUB4DOS/批处理/">批处理</a></li></span></span> | <span class="tags">标签 <a href="/tags/GRUB4DOS/" class="label label-primary">GRUB4DOS</a><a href="/tags/批处理/" class="label label-success">批处理</a><a href="/tags/模块/" class="label label-info">模块</a><a href="/tags/原创/" class="label label-warning">原创</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/grub4dos_hdpart/#comments" class="ds-thread-count comment-link" data-thread-key="738" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/asm_addr/">[整理] 汇编几个重要内存单元地址</a></h1>
      
        <span>发表于<time datetime="2011-08-02T14:22:07.000Z"> <a href="/post/asm_addr/">2011-08-02</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>本附录按类列举出一些重要的系统信息在内存中物理地址，为直接访问内存读取相应信息提供方便。</p>
<p>了解的内容：了解计算机系统的一些重要信息在内存中的存放位置。需要时，可直接访问内存读取相应信息。</p>
<p>本附录主要用于查阅，当使用时，知道在本附录中查阅。</p>
<ol>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.691ovk8rxabp" target="_blank">系统时钟地址</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.ju3bywo5blfr" target="_blank">显示特性数据地址</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.1o39sz3d5gq7" target="_blank">显示缓冲区地址</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.wzud1d7998jm" target="_blank">键盘地址</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.kfn7clasa1bp" target="_blank">中断向量表</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.ao7mzrloc4q1" target="_blank">系统配置</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.7qpem0o65sr7" target="_blank">硬盘驱动器</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.9q45zbcktzsz" target="_blank">ROM数据</a></li>
<li><a href="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM#h.w29nkjwberks" target="_blank">其它内容的地址</a> </li>
</ol>
<p>来源:<br> <a href="http://www.feiesoft.com/asm/appendix6.html" target="_blank">http://www.feiesoft.com/asm/appendix6.html</a><br> <a href="http://blog.csdn.net/wenweimin/article/details/105559" target="_blank">http://blog.csdn.net/wenweimin/article/details/105559</a></p>
<iframe style="WIDTH: 100%; HEIGHT: 800px" src="https://docs.google.com/document/pub?id=17xKQCzxfJm6zbvv-ICuMvFvQ1PV1LOC20XFQ2M8KNoM&amp;embedded=true"></iframe>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/程序设计/">程序设计</a></li><li><a href="/categories/程序设计/ASM/">ASM</a></li></span></span> | <span class="tags">标签 <a href="/tags/编程/" class="label label-primary">编程</a><a href="/tags/汇编/" class="label label-success">汇编</a><a href="/tags/ASM/" class="label label-info">ASM</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/asm_addr/#comments" class="ds-thread-count comment-link" data-thread-key="729" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/winsock_fix/">[分享] 解决由于DNS不正常导致不能上网的问题</a></h1>
      
        <span>发表于<time datetime="2011-05-23T17:23:39.000Z"> <a href="/post/winsock_fix/">2011-05-24</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>使用此方法可以解决由于WINSOCK错误造成DNS无法解析，还有和WINSOCK相关的程序无法正常使用的问题。</p>
<p>只需要一个命令就可以搞定了：</p>
<pre><code>netsh winsock reset
</code></pre><p>说下我碰到这个问题的情况，如果有人碰到和我类似的也可以试试。</p>
<p>因为平常使用youku(优酷)看视频，本来我一般是不下载什么加速客户端之类的，昨天就兴起下载了一个IKU（爱酷）的软件。</p>
<p>初步使用感觉很不错，可以快速查找下载，感觉是挺方便的。</p>
<p>然后下载完了就退出程序，就发现了这个程序居然有两个后台程序(<font color="#0000FF">ikuacc.exe</font> 和 <font color="#0000FF">ikucmc.exe</font>)在运行而且没有任何的提示。</p>
<p>好吧，因为大部份的国产软件都是这样子的，已经见怪不怪了。</p>
<p>不过我还是忍受不了不受控制的程序，所以晚上就删除了它。</p>
<p>然后问题就来了，发现居然网页打不开了，提示DNS错误。</p>
<p>在CMD下用ping命令任何域名都无法解析，但QQ可以正常使用。</p>
<p>好在之前曾经有过类似的情况，我想应该是WINSOCK的问题，所以就尝试修复了一下（用前面的语句），不需要重启，直接就可以使用了。</p>
<p>唉，现在装个国产的软件还是真不能让人放心啊。<br> 安装的时候得小心翼翼的，就怕它的送给你一堆你用不上的赠品<br> 删除的时候也得睁大眼晴，一不小心也有赠送的。<br> 或者送走大哥来个小弟，再送走小弟它又把大哥给请回来了。  </p>
<p> 许多软件为了防止你删除，软件作者可以花了许多的心思。<br> 比如XX压，删除的时候，如果你已经习惯了正常软件的删除过程，那不好意思，你可能没有办法删除它。可是你又不能去说它，因为它没有错。错在你没有看仔细。 </p>
<p>总之这些软件，我只要用过一次，就绝对不会再装第二次。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/系统相关/">系统相关</a></li></span></span> | <span class="tags">标签 <a href="/tags/DNS/" class="label label-primary">DNS</a><a href="/tags/WINSOCK/" class="label label-success">WINSOCK</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/winsock_fix/#comments" class="ds-thread-count comment-link" data-thread-key="687" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/modboot/">MODBOOT DOS程序最后的辉煌[2011-05-03更新]</a></h1>
      
        <span>发表于<time datetime="2011-05-03T17:04:59.000Z"> <a href="/post/modboot/">2011-05-04</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>MODBOOT是何物？</p>
<p>MODBOOT是一个模块化的DOS启动控制中心。</p>
<p>基于以下网站的MODBOOT改进而成的，配合GRUB4DOS启动，实现真正的模块化</p>
<p><a href="http://nu2.nu/bootdisk/modboot/" target="_blank">http://nu2.nu/bootdisk/modboot/</a></p>
<p>优点：快速，方便，小巧、可扩展。</p>
<ol>
<li>快速：以最快速的方式启动。</li>
<li>方便：添加修改模块非常的方便，更新也很很便，省去了回来打包成IMG镜像的麻烦，只需要用ZIP打包就成了。</li>
<li>小巧：也不能说多小巧，只是相对于目前动不动就1XMB的DOS启动盘来说是很小的。</li>
<li>扩展：扩展性非常强，可以随意进行扩展。</li>
<li>只有你想不到的，没有做不到的。</li>
</ol>
<p>后面有演示用的ISO文件下载，你可以测试一下启动效果。特别是U盘上使用。因为启动时只加载需要的文件，所以可以使用最快速的方式来启动。</p>
<p>我们不再需要制作启动盘，需要什么DOS程序直接打包成ZIP文档作为MODBOOT的一个模块就可以了。</p>
<p>启动时会自动列出来。</p>
<p>另外也可以直接使用上面网站提供的模块（需要转换成ZIP格式）</p>
<p>如果不想转换，那需要设置同时复制BIN\EXTRACT.EXE文件。</p>
<p>必须配合新版的GRUB4DOS使用，否则会提示GRUB4DOS版本错误。启动方法很简单在你原来的GRUB4DOS菜单上添加一个菜单项就可以了</p>
<pre><code>title ModBoot
command /BOOT/MODBOOT/MODBOOT.BAT

或

title ModBoot
/BOOT/MODBOOT/MODBOOT.BAT
boot
</code></pre><p>注：/BOOT/MODBOOT/是你放置MODBOOT的目录，MODBOOT支持放到任意目录下使用。<br>fb文件系统可能会无法正常使用。若是pxe启动则你需要每个目录都有一个dir.txt文件（用于显示文件列表）  </p>
<p>让我们先来看看效果图吧。</p>
<p>首先是主界面（注：所有内容都是自动生成的）</p>
<p><img src="http://c-dl.qiniudn.com/post/modboot_main.png" alt=""></p>
<p>自定义启动界面。</p>
<p><img src="http://c-dl.qiniudn.com/post/modboot_custom.png" alt=""></p>
<p>DOS启动菜单</p>
<p><img src="http://c-dl.qiniudn.com/post/modboot_dos.png" alt=""></p>
<p>注：使用LEVEL3里面的模块直接启动时，默认不显示这个菜单，可以在启动时快速按F8显示。</p>
<p>本工具的最新版本不再单独上传,请关注我的<a href="/post/g4d\_hd\_tools/" title="[分享] 基于GRUB4DOS的硬盘工具箱[2011-08-02更新]">GRUB4DOS硬盘工具箱</a>. 将会随工具箱一起更新. </p>
<p>演示版下载：(2011-05-03 更新）<br>文件名称: modboot.iso<br>文件大小: 13.42 MB (14,075,904 字节)<br>修改时间: 2011年05月25日，19:52:41<br>MD5: 73D2905E2E00F8EC4F0336AAAF58F6FB<br>SHA1: F54FC61E074B0960FB85A5705EF8163398EB03B8  </p>
<p>下载：<a href="http://yunfile.com/file/chenall/e95e35f4/" target="_blank">modboot.iso</a></p>
<p>演示用的ISO里面有带一个<a href="/post/qgho/">QGHO</a>（快速备份还原工具），这是一个比较复杂的模块。<br>如果要自己制作一个可以用于MODBOOT的模块，请查看里面的使用说明。或以下站点（英文）</p>
<p><a href="http://nu2.nu/bootdisk/modboot/" target="_blank">http://nu2.nu/bootdisk/modboot/</a></p>
<p>无忧启动论坛相关贴子：</p>
<p><a href="http://bbs.wuyou.com/viewthread.php?tid=184842&amp;extra=page%3D1" target="_blank">http://bbs.wuyou.com/viewthread.php?tid=184842&amp;extra=page%3D1</a></p>
<p>有什么疑问可以直接论坛回复或本文章后面评论。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/软件推荐/">软件推荐</a></li><li><a href="/categories/软件推荐/DOS/">DOS</a></li></span><span class="breadcrumb"><li><a href="/categories/GRUB4DOS/">GRUB4DOS</a></li></span></span> | <span class="tags">标签 <a href="/tags/GRUB4DOS/" class="label label-primary">GRUB4DOS</a><a href="/tags/DOS/" class="label label-success">DOS</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/modboot/#comments" class="ds-thread-count comment-link" data-thread-key="637" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/vhd_mnt/">[原创] VHD_MNT VHD文件快速挂载/卸载工具</a></h1>
      
        <span>发表于<time datetime="2011-04-28T16:38:14.000Z"> <a href="/post/vhd_mnt/">2011-04-29</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>VHD_MNT 是使用批处理写的一个小程序 ,</p>
<p>可以在WIN7以上的系统中使用.</p>
<p>用于快速挂载/卸载VHD虚拟磁盘.</p>
<p>依赖程序: 系统自带的diskpart,reg,find三个命令.</p>
<p>特点: 不使用第三方工具,不生成临时文件.使用方便.你需要做的只是双击.</p>
<p>2011-04-29 新增支持右键快速创建<code>差异磁盘</code>功能.</p>
<p>【使用方法】很简单两个关键字<code>双击</code></p>
<ul>
<li>使用了智能检测代码,所以需要做的就是<code>双击</code>.</li>
<li>安装: 直接<code>双击</code>运行本程序.</li>
<li>卸载: 直接<code>双击</code>运行本程序.</li>
<li>使用: 直接<code>双击</code>要挂载/分离的VHD文件. </li>
</ul>
<p>【批处理代码】</p>
<pre><code>@echo off
if &quot;%~n1&quot;==&quot;&quot; goto :install
set &quot;diskpart=echo exit|%ComSpec%/kprompt %%dsc%%$_|diskpart&quot;
if &quot;%~1&quot;==&quot;PARENT&quot; goto :PARENT

:attach
title ====VHD_MNT by chenall======正在自动检测....
set dsc=list$Svdisk
%diskpart%|find /i &quot;%~1&quot; &gt;nul &amp;&amp; goto :detach
title ====VHD_MNT by chenall====@@附加VHD@@ %*
set dsc=select$Svdisk$Sfile=&quot;%~f1&quot;$_attach$Svdisk$S%2$_
goto :diskpart

:detach
title ====VHD_MNT by chenall====@@分离VHD文件@@%*
set dsc=select$Svdisk$Sfile=&quot;%~f1&quot;$_detach$Svdisk$_
goto :diskpart

:PARENT
shift
for /l %%i in (1,1,99) do if not exist &quot;%~dpn1_s%%i.vhd&quot; (set &quot;file=%~n1_s%%i.vhd&quot;&amp;goto :create)

exit /b

:create
title ====VHD_MNT by chenall====@@创建差异VHD文件@@
echo.
echo.
echo. VHD_MNT 创建一个差异VHD镜像文件.
echo. 来源: %1
echo.
echo. 请输入要创建的差异VHD文件名.直接回车使用%file%
echo. 注:不要输入路径名.
echo.
set /pfile=差异VHD:
set dsc=create$Svdisk$Sfile=&quot;%~dp1%file%&quot;$SPARENT=&quot;%~f1&quot;$_
title ====VHD_MNT by chenall====@@创建差异VHD文件@@%file%

:diskpart
%diskpart%
pause
exit /b

:install
reg query &quot;HKCR\.vhd\shell\@附加/分离\command&quot; /ve 1&gt;nul 2&gt;nul &amp;&amp; goto :uninstall
reg add &quot;HKCR\.vhd\shell\@附加/分离\command&quot; /d &quot;vhd_mnt.cmd %%1&quot; /f &gt;nul
reg add &quot;HKCR\.vhd\shell\创建差异VHD\command&quot; /d &quot;vhd_mnt.cmd PARENT=%%1&quot; /f &gt;nul
reg add &quot;HKCR\.vhd\DefaultIcon&quot; /d &quot;%%SystemRoot%%\\system32\\shell32.dll,8&quot; /f &gt;nul
copy /y &quot;%~f0&quot; &quot;%SystemRoot%\system32\vhd_mnt.cmd&quot; &gt;nul
echo.
echo. .VHD文件默认文件设置完成.
echo.
echo. 现在可以直接双击.VHD文件来自动挂载/卸载了(如果已经挂载再次双击该文件时自动卸载)
echo. 
echo. VHD文件快速挂载/卸载工具 by chenall 2011-04-29
echo.                http://chenall.net/post/vhd_mnt
pause
exit

:uninstall
echo.
reg delete &quot;HKCR\.vhd\shell&quot; /f &gt;nul
del /f &quot;%SystemRoot%\system32\vhd_mnt.cmd&quot;
echo.
echo. 已经取消.VHD的默认关联,如果需要双击VHD自动挂载/卸载请再次执行本程序.
echo.
echo. VHD文件快速挂载/卸载工具 by chenall 2011-04-29
echo.                http://chenall.net/post/vhd_mnt
pause
exit
</code></pre>
      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/程序设计/">程序设计</a></li><li><a href="/categories/程序设计/批处理/">批处理</a></li></span></span> | <span class="tags">标签 <a href="/tags/vhd/" class="label label-primary">vhd</a><a href="/tags/vhdmount/" class="label label-success">vhdmount</a><a href="/tags/系统相关/" class="label label-info">系统相关</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/vhd_mnt/#comments" class="ds-thread-count comment-link" data-thread-key="667" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/post/win_print_set/">[分享] 在使用批处理修改WINDOWS的打印机设置</a></h1>
      
        <span>发表于<time datetime="2011-02-25T01:41:12.000Z"> <a href="/post/win_print_set/">2011-02-25</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <p>因为无忧里面以下贴子,</p>
<p><a href="http://bbs.wuyou.com/viewthread.php?tid=187450" target="_blank">http://bbs.wuyou.com/viewthread.php?tid=187450</a></p>
<p>所以就抽空研究了一下整理了一个批处理出来.</p>
<p>自己目前用不上,发在这里留一个底,万一自己以后碰到了就有现成的可用了.</p>
<p>如果对您有用就支持一下吧,^_^</p>
<pre><code>@echo off
:::::::::::使用批处理修改打印机设置:::::::::::::::::::::::::::::::::::::::::::::::
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
::来源:   http://chenall.net/post/win_print_set
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
setlocal
::指定打印机名称
set print=Microsoft XPS Document Writer
::设置默认的注册表路径
set reg_path=HKLM\SYSTEM\CurrentControlSet\Control\Print\Printers\%print%
::读取原来的设置
for /f &quot;usebackq tokens=3&quot; %%i in (`reg query &quot;%reg_path%&quot; /v Attributes ^| find /i &quot;Attributes&quot;`) do set p_attr=%%i
::0x0     立即开始打印(默认)
::0x1     在后台处理完最后一页时开始打印
::0x2     直接打印到打印机
::::::::::以上设置只有一个会生效
::0x80    挂起不匹配文档
::0x100   保留打印的文档
::0x200   首先打印后台文档
::0x800   双向打印

::修改设置
::例子取消双向打印,使用与运算
set /a &quot;p_attr &amp;= ~0x800&quot;
::::若是要启用双向打印,使用或运算
::set /a &quot;p_attr |= 0x800&quot;
::设置首先打印后台文档
set /a &quot;p_attr |= 0x80&quot;


::最终执行
reg add &quot;%reg_path%&quot; /v Attributes /t REG_DWORD /d %p_attr% /f
::以下是必须的，刷新一下打印机的设置，否则需要重启后才可以看到效果。
net stop spooler
net start spooler
</code></pre>
      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">归类<span class="breadcrumb fa fa-folder"><li><a href="/categories/系统相关/">系统相关</a></li></span><span class="breadcrumb"><li><a href="/categories/程序设计/">程序设计</a></li><li><a href="/categories/程序设计/批处理/">批处理</a></li></span></span> | <span class="tags">标签 <a href="/tags/批处理/" class="label label-primary">批处理</a></span> | <span class="time">最近更新:<time title="2014-02-26 19:52:59"datetime="2014-02-26 19:52:59"> 2014-02-26</time></span> | <span class="comment-link">
<a href="http://chenall.net/post/win_print_set/#comments" class="ds-thread-count comment-link" data-thread-key="652" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/4/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><a class="page-number" href="/page/4/">4</a></li><li class="active"><li><span class="page-number current">5</span></li></li><li><a class="page-number" href="/page/6/">6</a></li><li><a class="page-number" href="/page/7/">7</a></li><li><a class="page-number" href="/page/8/">8</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/14/">14</a></li><li><a class="page-number" href="/page/15/">15</a></li><li><a class="extend next" href="/page/6/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_swiftype" class="widget panel panel-primary">
    
<form class="input-group">
<input type="text" id="st-search-input" class="form-control" placeholder="search" autocomplete="off" autocorrect="off" autocapitalize="off" style="outline: none;">
<span class="input-group-btn"><button class="btn btn-default" type="search"><i class="fa fa-search"></i></button></span>
</form></div>

<div id="widget_google_cse" class="widget panel panel-primary">
    
<gcse:searchbox-only defaultToRefinement="chenall.net" resultsUrl="/search/" newWindow="false"></gcse:searchbox-only>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">分类</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_random_posts" class="widget panel panel-primary">
  <div class="panel-heading">随机文章</div>  <div class='hexo_random_posts' data-count=8></div></div>

<div id="widget_google_sidebar" class="widget panel panel-primary">
  <div class="panel-heading">赞助商</div>  
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0028617410393728"
     data-ad-slot="2577551260"
     data-ad-format="rectangle"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">标签云</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_sina_weiboshow" class="widget panel panel-primary">
  <div class="panel-heading">新浪微搏秀</div>  <iframe width="100%" height="600" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=600&fansRow=0&ptype=0&speed=0&skin=5&isTitle=0&noborder=1&isWeibo=1&isFans=0&uid=1082888172&verifier=1a4946c5&dpc=1"></iframe>
</div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">最近评论</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2008-2014 chenall
  
    &nbsp;&nbsp;</span>
  <a href='http://www.miibeian.gov.cn/'>闽ICP备14002519号</a></span>
  <span id='analytics-51la'>
<script language="javascript" type="text/javascript" src="http://js.users.51.la/3214078.js"></script>
<noscript><a href="http://www.51.la/?3214078" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/3214078.asp" style="border:none" /></a></noscript>
</span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30310093-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?41a3a9225fc0df0d53086baea0f90d96"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'  title="本站由hexo V2.5.2 生成"><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall V2.0</a></strong><span class="pull-right"> 更新时间: <em>2014-04-02 09:22:36</em></span></div>
</div>
<div class="clearfix"></div>
  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
            <script type="text/javascript"> (function(win,doc){ var s = doc.createElement("script"), h = doc.getElementsByTagName("head")[0]; if (!win.alimamatk_show) { s.charset = "gbk"; s.async = true; s.src = "http://a.alimama.cn/tkapi.js"; h.insertBefore(s, h.firstChild); }; var o = { pid: "mm_14266497_2425855_13670245",}; win.alimamatk_onload = win.alimamatk_onload || []; win.alimamatk_onload.push(o); })(window,document);</script>    
                
            <script type="text/javascript">
var duoshuoQuery = {short_name:"chenall"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
            
<script type="text/javascript">var ujian_config = {num:6,showType:0,picSize:84,textHeight:45};_js2load.push({src:'http://v1.ujian.cc/code/ujian.js?uid=1880458'});</script>
<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
    
            
<div id='swiftype-searchinfo' style='display: none;'><div class="alert alert-info"> 正在搜索中，稍后将在这里显示结果。。。。</div></div>
<script type="text/javascript">
var Swiftype = window.Swiftype || {key:'P473Cjp95e3bFhiCP88w',renderStyle: 'inline' };
_js2load.push({src:"//s.swiftypecdn.com/embed.js"});
$(function(){$('#main-col').prepend('<div id="st-results-container"></div>');$('form').has('#st-search-input').submit(function(){$('#st-results-container').html($('#swiftype-searchinfo').html());})});
</script>
    
            <script>_js2load.push({src:(document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=013748367689400048621:dmsqkhtcvbm'});</script>
    
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
<script type="text/javascript" src="/js/chenall.js"></script>
  <!--addons at end of body-->
</body>
</html>
